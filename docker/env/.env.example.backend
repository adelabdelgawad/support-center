# =============================================================================
# Backend Application Configuration for Docker Deployment
# =============================================================================
# Copy this file to .env.backend and update with your actual values
# Never commit .env files with real credentials to version control
#
# NOTE: Docker uses internal networking (postgres:5432, redis:6379, minio:9000)
#       For local development, use src/backend/.env.example instead


# =============================================================================
# DATABASE (prefix: DATABASE_) - REQUIRED
# =============================================================================
# NOTE: POSTGRES_* variables are substituted from root .env via docker-compose
# DATABASE_URL uses these variables: ${POSTGRES_USER}, ${POSTGRES_PASSWORD}, ${POSTGRES_DB}
DATABASE_URL=postgresql+asyncpg://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres:5432/${POSTGRES_DB}
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=10
DATABASE_POOL_TIMEOUT=30
DATABASE_POOL_RECYCLE=3600


# =============================================================================
# REDIS (prefix: REDIS_) - REQUIRED
# =============================================================================
# NOTE: REDIS_PASSWORD is substituted from root .env via docker-compose
REDIS_URL=redis://:${REDIS_PASSWORD}@redis:6379/0
REDIS_MAX_CONNECTIONS=50


# =============================================================================
# SECURITY (prefix: SECURITY_) - REQUIRED
# =============================================================================
# NOTE: These secrets are substituted from root .env via docker-compose
# Generate secure keys using: openssl rand -hex 32
SECURITY_SECRET_KEY=${SESSION_SECRET}
JWT_SECRET_KEY=${JWT_SECRET_KEY}
ALGORITHM=HS256
JWT_ISSUER=service-catalog
JWT_AUDIENCE=it-service-catalog
ACCESS_TOKEN_EXPIRE_MINUTES=15
REFRESH_TOKEN_EXPIRE_DAYS=7


# =============================================================================
# APPLICATION (prefix: API_)
# =============================================================================
API_APP_NAME=Service Catalog
API_APP_VERSION=1.0.0
API_DEBUG=false
API_API_V1_PREFIX=/api/v1


# =============================================================================
# CORS (prefix: CORS_)
# =============================================================================
CORS_ORIGINS=["http://localhost:3010","http://tauri.localhost","tauri://localhost"]


# =============================================================================
# FILE UPLOAD (prefix: UPLOAD_)
# =============================================================================
UPLOAD_MAX_UPLOAD_SIZE=52428800
UPLOAD_UPLOAD_DIR=./uploads
UPLOAD_ALLOWED_EXTENSIONS=jpg,jpeg,png,gif,pdf,doc,docx,txt,log,zip


# =============================================================================
# EMAIL (prefix: EMAIL_)
# =============================================================================
EMAIL_SMTP_HOST=smtp.example.com
EMAIL_SMTP_PORT=587
EMAIL_SMTP_USER=noreply@example.com
EMAIL_SMTP_PASSWORD=CHANGE_ME_SMTP_PASSWORD
EMAIL_SMTP_FROM=noreply@example.com
EMAIL_SMTP_TLS=true


# =============================================================================
# WEBSOCKET (prefix: WS_)
# =============================================================================
WS_HEARTBEAT_INTERVAL=30
WS_MESSAGE_QUEUE_SIZE=1000
WS_USE_REDIS_PUBSUB=true


# =============================================================================
# SIGNALR (prefix: SIGNALR_) - Real-time communication microservice
# =============================================================================
# Internal URL for SignalR service (Docker internal networking)
SIGNALR_INTERNAL_URL=http://signalr-service:5000
# API key for internal SignalR endpoints (substituted from root .env via docker-compose)
SIGNALR_INTERNAL_API_KEY=${SIGNALR_INTERNAL_API_KEY}
# Enable SignalR event broadcasting
SIGNALR_ENABLED=true


# =============================================================================
# PERFORMANCE (prefix: PERFORMANCE_)
# =============================================================================
PERFORMANCE_QUERY_CACHE_SIZE=1000
PERFORMANCE_ENABLE_QUERY_LOGGING=false


# =============================================================================
# MONITORING (prefix: MONITORING_)
# =============================================================================
MONITORING_ENABLE_METRICS=true
MONITORING_METRICS_PORT=9090


# =============================================================================
# LOGGING (prefix: LOG_)
# =============================================================================
LOG_LEVEL=INFO
LOG_ENABLE_FILE_LOGGING=true
LOG_LOG_DIR=logs
LOG_ENABLE_CONSOLE_LOGGING=true


# =============================================================================
# MINIO OBJECT STORAGE (prefix: MINIO_) - REQUIRED
# =============================================================================
MINIO_ENDPOINT=minio:9000
MINIO_ACCESS_KEY=CHANGE_ME_MINIO_ACCESS_KEY
MINIO_SECRET_KEY=CHANGE_ME_MINIO_SECRET_KEY
MINIO_BUCKET_NAME=servicecatalog-files
MINIO_SECURE=false
MINIO_REGION=us-east-1
MINIO_PRESIGNED_URL_EXPIRY_SECONDS=3600
MINIO_PRESIGNED_URL_EXPIRY_DOWNLOAD=86400
MINIO_MAX_FILE_SIZE_MB=50


# =============================================================================
# CELERY (prefix: CELERY_) - REQUIRED
# =============================================================================
CELERY_BROKER_URL=redis://:CHANGE_ME_REDIS_PASSWORD@redis:6379/0
CELERY_RESULT_BACKEND=redis://:CHANGE_ME_REDIS_PASSWORD@redis:6379/1


# =============================================================================
# ACTIVE DIRECTORY (prefix: AD_) - OPTIONAL
# =============================================================================
AD_PATH=dc.example.com
AD_DOMAIN_NAME=EXAMPLE
AD_PORT=389
AD_USE_SSL=false
AD_LDAP_USERNAME=service_account
AD_LDAP_PASSWORD=CHANGE_ME_AD_PASSWORD
AD_BASE_DN=DC=example,DC=com
AD_DESIRED_OUS=Users,Staff


# =============================================================================
# TURN SERVER (prefix: TURN_) - OPTIONAL (for WebRTC remote access)
# =============================================================================
TURN_ENABLED=true
TURN_URLS=turn:your-server.com:3478,turn:your-server.com:3478?transport=tcp
TURN_USERNAME=servicecatalog
TURN_CREDENTIAL=CHANGE_ME_TURN_CREDENTIAL
# TURN Server Secret (substituted from root .env via docker-compose)
TURN_SECRET=${TURN_SECRET}
TURN_TTL=86400


# =============================================================================
# ZAPIER/WHATSAPP INTEGRATION (prefix: ZAPIER_) - OPTIONAL
# =============================================================================
ZAPIER_BASE_URL=https://hooks.zapier.com/hooks/catch/YOUR_HOOK_ID/
ZAPIER_SEND_TYPE=Group
FRONTEND_BASE_URL=http://localhost:3010


# =============================================================================
# ADMIN USER SETUP (used at first startup only)
# =============================================================================
# IMPORTANT: Change these credentials immediately after first deployment
ADMIN_USERNAME=admin
ADMIN_PASSWORD=CHANGE_ME_ADMIN_PASSWORD
ADMIN_EMAIL=admin@example.com
ADMIN_FULL_NAME=System Administrator
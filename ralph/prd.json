{
  "project": "Support Center",
  "branchName": "ralph/simplify-backend-architecture",
  "description": "Simplify Backend Architecture â€” Flatten Simple Resources by removing unnecessary service and CRUD layers for simple resources that are pure passthrough",
  "userStories": [
    {
      "id": "US-001",
      "title": "Remove service_section service layer (passthrough)",
      "description": "As a developer, I want to remove the service_section service layer because it's pure passthrough to the CRUD layer, adding unnecessary indirection.",
      "acceptanceCriteria": [
        "Modify api/v1/endpoints/service_sections.py to call ServiceSectionCRUD directly instead of service",
        "Add try/except error handling in endpoint where needed",
        "Add explicit await db.commit() for write operations",
        "Delete services/service_section_service.py",
        "No broken imports referencing service_section_service",
        "Typecheck passes",
        "Tests pass"
      ],
      "priority": 1,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-002",
      "title": "Remove tag service layer (inline raw SQL)",
      "description": "As a developer, I want to inline the tag service DB queries into the endpoint because the service has no CRUD layer and only does raw SQL with minor FK validation.",
      "acceptanceCriteria": [
        "Copy DB query logic from services/tag_service.py into api/v1/endpoints/tags.py",
        "Move category existence FK check into endpoint validation",
        "Add try/except error handling in endpoint",
        "Add explicit await db.commit() for write operations",
        "Delete services/tag_service.py",
        "No broken imports referencing tag_service",
        "Typecheck passes",
        "Tests pass"
      ],
      "priority": 2,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-003",
      "title": "Remove system_event service and CRUD layers",
      "description": "As a developer, I want to remove both system_event service and CRUD layers because the service already does raw SQLAlchemy and the CRUD is barely used.",
      "acceptanceCriteria": [
        "Copy DB query logic from services/system_event_service.py into api/v1/endpoints/system_events.py",
        "Move system_message_id FK check into endpoint validation",
        "Add try/except error handling in endpoint",
        "Add explicit await db.commit() for write operations",
        "Delete services/system_event_service.py",
        "Delete crud/system_event_crud.py",
        "No broken imports referencing system_event_service or system_event_crud",
        "Typecheck passes",
        "Tests pass"
      ],
      "priority": 3,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-004",
      "title": "Remove page service layer (keep complex CRUD)",
      "description": "As a developer, I want to remove the page service layer while keeping the CRUD because the CRUD has genuine complexity (role-based access) but the service is pure passthrough.",
      "acceptanceCriteria": [
        "Modify api/v1/endpoints/pages.py to call PageCRUD and PageRoleCRUD directly",
        "Keep path-uniqueness validation in endpoint",
        "Add try/except error handling in endpoint where needed",
        "Add explicit await db.commit() for write operations",
        "Delete services/page_service.py",
        "No broken imports referencing page_service",
        "Typecheck passes",
        "Tests pass"
      ],
      "priority": 4,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-005",
      "title": "Remove business_unit service and CRUD layers",
      "description": "As a developer, I want to remove both business_unit service and CRUD layers because the CRUD is empty and the service only does simple DB ops with decorators.",
      "acceptanceCriteria": [
        "Copy DB query logic from services/business_unit_service.py into api/v1/endpoints/business_units.py",
        "Move IP-to-CIDR matching logic inline into endpoint",
        "Add try/except error handling in endpoint",
        "Add explicit await db.commit() for write operations",
        "Delete services/business_unit_service.py",
        "Delete crud/business_unit_crud.py",
        "No broken imports referencing business_unit_service or business_unit_crud",
        "Typecheck passes",
        "Tests pass"
      ],
      "priority": 5,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-006",
      "title": "Cleanup unused imports and verify all endpoints",
      "description": "As a developer, I want to clean up unused imports and verify that all modified endpoints work correctly after the service layer removal.",
      "acceptanceCriteria": [
        "Remove unused imports from all modified endpoint files",
        "Update crud/__init__.py to remove deleted CRUD classes",
        "Run full test suite: cd src/backend && pytest",
        "No broken imports remaining (verified via grep for deleted service references)",
        "Each modified endpoint responds correctly (manual verification documented)",
        "Typecheck passes",
        "Tests pass"
      ],
      "priority": 6,
      "passes": false,
      "notes": ""
    }
  ]
}
